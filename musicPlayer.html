<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Music Player</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&family=Lato&display=swap" rel="stylesheet" />
  <style>
    :root {
      --primary-color: #dfdfe2;
      --secondary-color: #ffffff;
      --app-background-color: #4d4d62;
      --background-color: #1b1b32;
      --foreground-color: #3b3b4f;
      --highlight-color: #f1be32;
      --danger-color: #ff4d4d;

      --root-font-size: 16px;
      font-size: var(--root-font-size);

      --font-headline: "Roboto Mono", monospace;
      --font-family: "Lato", sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background: linear-gradient(135deg, #1b1b32, #4d4d62);
      color: var(--primary-color);
      font-family: var(--font-family);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    h1, h2 {
      margin: 0;
      font-family: var(--font-headline);
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 20px;
      width: 95%;
      max-width: 480px;
    }

    .player, .playlist {
      background-color: var(--background-color);
      border: 2px solid var(--foreground-color);
      border-radius: 12px;
      box-shadow: 0 6px 12px rgba(0,0,0,0.4);
      overflow: hidden;
    }

    .player {
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .player-bar, .playlist-bar {
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: var(--foreground-color);
      padding: 8px;
    }

    .player-content {
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: center;
    }

    #player-album-art img {
      width: 150px;
      border-radius: 10px;
      animation: fadeIn 0.5s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    .player-display {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      gap: 12px;
    }

    .player-display-song-artist p {
      margin: 0;
      text-align: center;
    }

    #player-song-artist {
      font-size: 0.85rem;
      color: var(--highlight-color);
    }

    .player-buttons {
      display: flex;
      justify-content: space-between;
    }

    button {
      background: none;
      border: none;
      color: inherit;
      cursor: pointer;
      transition: transform 0.2s, color 0.2s;
    }

    button:hover {
      transform: scale(1.1);
      color: var(--highlight-color);
    }

    .playing > svg {
      fill: var(--highlight-color);
    }

    /* Progress bar */
    .progress-container {
      width: 100%;
      height: 6px;
      background: var(--foreground-color);
      border-radius: 4px;
      overflow: hidden;
      cursor: pointer;
    }

    .progress {
      height: 100%;
      background: var(--highlight-color);
      width: 0%;
      transition: width 0.25s linear;
    }

    .time-display {
      font-size: 0.75rem;
      display: flex;
      justify-content: space-between;
      color: var(--secondary-color);
    }

    /* Playlist */
    #playlist-songs {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
    }

    .playlist-song {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px;
      transition: background 0.2s;
    }

    .playlist-song[aria-current="true"] {
      background: var(--foreground-color);
    }

    .playlist-song-title {
      flex: 1;
      font-size: 0.9rem;
    }

    .playlist-song-artist {
      font-size: 0.8rem;
      color: var(--highlight-color);
      margin-left: 10px;
    }

    .playlist-song-duration {
      font-size: 0.75rem;
      margin-left: auto;
    }

    .playlist-song-delete:hover circle {
      fill: var(--danger-color);
    }

    @media (max-width: 500px) {
      .player-content {
        flex-direction: column;
      }

      #player-album-art img {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="player">
      <div class="player-bar"><h1>Music Player</h1></div>
      <div class="player-content">
        <div id="player-album-art">
          <img src="https://cdn.freecodecamp.org/curriculum/js-music-player/quincy-larson-album-art.jpg" alt="album art">
        </div>
        <div class="player-display">
          <div class="player-display-song-artist">
            <p id="player-song-title">‚Äì</p>
            <p id="player-song-artist"></p>
          </div>
          <div class="progress-container" id="progress-container">
            <div class="progress" id="progress"></div>
          </div>
          <div class="time-display">
            <span id="current-time">0:00</span>
            <span id="duration">0:00</span>
          </div>
          <div class="player-buttons">
            <button id="previous" aria-label="Previous">‚èÆÔ∏è</button>
            <button id="play" aria-label="Play">‚ñ∂Ô∏è</button>
            <button id="pause" aria-label="Pause">‚è∏Ô∏è</button>
            <button id="next" aria-label="Next">‚è≠Ô∏è</button>
            <button id="shuffle" aria-label="Shuffle">üîÄ</button>
          </div>
        </div>
      </div>
    </div>
    <div class="playlist">
      <div class="playlist-bar"><h2>Playlist</h2></div>
      <ul id="playlist-songs"></ul>
    </div>
  </div>

  <script>
    const playlistSongs = document.getElementById("playlist-songs");
    const playButton = document.getElementById("play");
    const pauseButton = document.getElementById("pause");
    const nextButton = document.getElementById("next");
    const previousButton = document.getElementById("previous");
    const shuffleButton = document.getElementById("shuffle");
    const progressContainer = document.getElementById("progress-container");
    const progress = document.getElementById("progress");
    const currentTimeEl = document.getElementById("current-time");
    const durationEl = document.getElementById("duration");

    const allSongs = [
      {id:0,title:"Scratching The Surface",artist:"Quincy Larson",duration:"4:25",src:"https://cdn.freecodecamp.org/curriculum/js-music-player/scratching-the-surface.mp3"},
      {id:1,title:"Can't Stay Down",artist:"Quincy Larson",duration:"4:15",src:"https://cdn.freecodecamp.org/curriculum/js-music-player/can't-stay-down.mp3"},
      {id:2,title:"Still Learning",artist:"Quincy Larson",duration:"3:51",src:"https://cdn.freecodecamp.org/curriculum/js-music-player/still-learning.mp3"},
    ];

    const audio = new Audio();
    let userData = { songs:[...allSongs], currentSong:null, songCurrentTime:0 };

    const renderSongs = (songs) => {
      playlistSongs.innerHTML = songs.map(song => `
        <li id="song-${song.id}" class="playlist-song">
          <button onclick="playSong(${song.id})" class="playlist-song-info">
            <span class="playlist-song-title">${song.title}</span>
            <span class="playlist-song-artist">${song.artist}</span>
            <span class="playlist-song-duration">${song.duration}</span>
          </button>
          <button onclick="deleteSong(${song.id})" class="playlist-song-delete" aria-label="Delete ${song.title}">
            <svg width="20" height="20" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="8" fill="#4d4d62"/><path d="M5 5l6 6M11 5l-6 6" stroke="white" stroke-width="2"/></svg>
          </button>
        </li>
      `).join("");
    };

    const setPlayerDisplay = () => {
      document.getElementById("player-song-title").textContent = userData?.currentSong?.title || "‚Äì";
      document.getElementById("player-song-artist").textContent = userData?.currentSong?.artist || "";
    };

    const highlightCurrentSong = () => {
      document.querySelectorAll(".playlist-song").forEach(el => el.removeAttribute("aria-current"));
      const current = document.getElementById(`song-${userData?.currentSong?.id}`);
      if(current) current.setAttribute("aria-current","true");
    };

    const playSong = (id) => {
      const song = userData.songs.find(s => s.id === id);
      if(!song) return;
      audio.src = song.src;
      userData.currentSong = song;
      audio.play();
      setPlayerDisplay();
      highlightCurrentSong();
      playButton.classList.add("playing");
    };

    const pauseSong = () => {
      audio.pause();
      playButton.classList.remove("playing");
    };

    const deleteSong = (id) => {
      userData.songs = userData.songs.filter(s => s.id !== id);
      if(userData.currentSong?.id === id) { pauseSong(); userData.currentSong=null; setPlayerDisplay(); }
      renderSongs(userData.songs);
      highlightCurrentSong();
    };

    playButton.onclick = () => playSong(userData.currentSong?.id ?? userData.songs[0].id);
    pauseButton.onclick = pauseSong;
    nextButton.onclick = () => {
      let idx = userData.songs.findIndex(s=>s.id===userData.currentSong?.id);
      if(idx>=0 && idx<userData.songs.length-1) playSong(userData.songs[idx+1].id);
    };
    previousButton.onclick = () => {
      let idx = userData.songs.findIndex(s=>s.id===userData.currentSong?.id);
      if(idx>0) playSong(userData.songs[idx-1].id);
    };
    shuffleButton.onclick = () => {
      userData.songs.sort(()=>Math.random()-0.5);
      renderSongs(userData.songs);
    };

    // Progress bar
    audio.addEventListener("timeupdate", () => {
      const {duration, currentTime} = audio;
      if(isNaN(duration)) return;
      const progressPercent = (currentTime/duration)*100;
      progress.style.width = progressPercent + "%";
      currentTimeEl.textContent = formatTime(currentTime);
      durationEl.textContent = formatTime(duration);
    });

    progressContainer.addEventListener("click", (e)=>{
      const width = progressContainer.clientWidth;
      const clickX = e.offsetX;
      audio.currentTime = (clickX/width)*audio.duration;
    });

    const formatTime = (time) => {
      const minutes = Math.floor(time/60);
      const seconds = Math.floor(time%60).toString().padStart(2,"0");
      return `${minutes}:${seconds}`;
    };

    renderSongs(userData.songs);
    setPlayerDisplay();
  </script>
</body>
</html>
